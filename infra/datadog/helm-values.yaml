# ğŸ“Š Datadog Agent Helm Values - Kubernetes í´ëŸ¬ìŠ¤í„° í†µí•© ëª¨ë‹ˆí„°ë§
# 
# ì£¼ìš” ê¸°ëŠ¥:
# - APM: ë¶„ì‚° íŠ¸ë ˆì´ì‹± (ëª¨ë“  ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤)
# - ë¡œê·¸: ì»¨í…Œì´ë„ˆ ë¡œê·¸ ìˆ˜ì§‘ ë° íŒŒì‹±
# - ë©”íŠ¸ë¦­: ì‹œìŠ¤í…œ, ì• í”Œë¦¬ì¼€ì´ì…˜, ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­
# - Autodiscovery: ìë™ ì„œë¹„ìŠ¤ ë°œê²¬ ë° ì„¤ì •
# - OpenMetrics: Prometheus ë©”íŠ¸ë¦­ ìˆ˜ì§‘ (KrakenD)
# 
# ì„¤ì • íˆìŠ¤í† ë¦¬:
# - ì²˜ìŒ datadog.env: demo ë¡œ ì„¤ì •í–ˆë‹¤ê°€ Helm template ì˜¤ë¥˜ ë°œìƒí•˜ì—¬ tags ë°©ì‹ìœ¼ë¡œ ë³€ê²½
datadog:
  site: datadoghq.com
  apiKeyExistingSecret: datadog-secret
  # logLevel: debug               # DEBUG ë¡œê·¸ í™œì„±í™” ì‹œ ì£¼ì„ í•´ì œ (í™˜ê²½ë³€ìˆ˜ DD_LOG_LEVELê³¼ í•¨ê»˜ ì‚¬ìš©)
  tags:
    - env:demo                    # í™˜ê²½ íƒœê·¸ (ì„œë¹„ìŠ¤ë“¤ê³¼ ì¼ì¹˜)
  logs:
    enabled: true
    containerCollectAll: true     # ëª¨ë“  ì»¨í…Œì´ë„ˆ ë¡œê·¸ ìˆ˜ì§‘
  apm:
    enabled: true                 # Application Performance Monitoring
  processAgent:
    enabled: true                 # í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§
  networkMonitoring:
    enabled: true                 # ë„¤íŠ¸ì›Œí¬ ëª¨ë‹ˆí„°ë§
  dbm:
    enabled: true                 # Database Monitoring
  kubeStateMetricsEnabled: true   # K8s ìƒíƒœ ë©”íŠ¸ë¦­
  
  # Kubelet Integration ì»¤ìŠ¤í„°ë§ˆì´ì œì´ì…˜
  # kubernetes.kubelet.pod.start.duration.count ë©”íŠ¸ë¦­ ìˆ˜ì§‘ì„ ìœ„í•´ Python check ì‚¬ìš©
  kubelet:
    coreCheckEnabled: false       # Go ì½”ì–´ ì²´í¬ ë¹„í™œì„±í™”, Python ì²´í¬ í™œì„±í™”
  
  # ë™ë£Œ ì¶”ì²œìœ¼ë¡œ ì¶”ê°€ëœ ì™„ì „í•œ kubelet confd ì„¤ì •
  # confd ì‚¬ìš© ì‹œ ê¸°ì¡´ ì„¤ì •ì„ ì™„ì „íˆ ëŒ€ì²´í•˜ë¯€ë¡œ í•„ìˆ˜ ì„¤ì •ë“¤ì„ ëª¨ë‘ í¬í•¨
  confd:
    kubelet.yaml: |-
      ad_identifiers:             # Autodiscovery ì‹ë³„ì (í•„ìˆ˜)
        - _kubelet
      init_config: null           # ì´ˆê¸°í™” ì„¤ì • (í•„ìˆ˜)
      instances:
        - min_collection_interval: 20           # 20ì´ˆ ê°„ê²©ìœ¼ë¡œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
          send_distribution_buckets: true       # íˆìŠ¤í† ê·¸ë¨ ë²„í‚·ì„ ë¶„í¬ë¡œ ì „ì†¡
          # ì°¸ê³ : send_distribution_buckets í™œì„±í™” ì‹œ ì¼ë¶€ duration ë©”íŠ¸ë¦­ì´ ì‚¬ë¼ì§€ëŠ” ì´ìŠˆ ì¡´ì¬

# Agent ì»¨í…Œì´ë„ˆ ì„¤ì •
agents:
  containers:
    agent:
      env:
        # ë¡œì»¬ì´ ì•„ë‹Œ íŠ¸ë˜í”½ìœ¼ë¡œë¶€í„°ì˜ APM íŠ¸ë ˆì´ìŠ¤ ìˆ˜ì‹  í—ˆìš©
        - name: DD_APM_NON_LOCAL_TRAFFIC
          value: "true"
        # ë¡œì»¬ì´ ì•„ë‹Œ ì†ŒìŠ¤ë¡œë¶€í„°ì˜ DogStatsD ë©”íŠ¸ë¦­ ìˆ˜ì‹  í—ˆìš©  
        - name: DD_DOGSTATSD_NON_LOCAL_TRAFFIC
          value: "true"
        # ì°¸ê³ : DEBUG ë¡œê·¸ë ˆë²¨ ì„¤ì • ì‹œ ë‘ ê°€ì§€ ëª¨ë‘ í•„ìš”í–ˆìŒ (ë‹¨ì¼ ì„¤ì •ìœ¼ë¡œëŠ” ë¶ˆì¶©ë¶„í–ˆì—ˆìŒ.)
        # 1) Helm ì°¨íŠ¸ ë ˆë²¨: logLevel: debug 
        # 2) í™˜ê²½ ë³€ìˆ˜ ë ˆë²¨: DD_LOG_LEVEL: "debug"
        # Flare íŒŒì¼ ìƒì„± í›„ ë¶„ì„ ì™„ë£Œ, í˜„ì¬ëŠ” INFO ë ˆë²¨ë¡œ ë˜ëŒë¦¼
        # - name: DD_LOG_LEVEL
        #   value: "debug"

# í´ëŸ¬ìŠ¤í„° Agent í™œì„±í™” - í´ëŸ¬ìŠ¤í„° ë ˆë²¨ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
clusterAgent:
  enabled: true
  admissionController:
    enabled: true                 # Admission Controller í™œì„±í™”
    mutateUnlabelled: false       # ë¼ë²¨ì´ ì—†ëŠ” PodëŠ” ìˆ˜ì •í•˜ì§€ ì•ŠìŒ
